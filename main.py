# mbti_love_full_app.py
import streamlit as st
from textwrap import fill
import datetime

st.set_page_config(page_title="MBTI ì—°ì•  ì„±í–¥ & ê¶í•© ë¶„ì„ê¸°", page_icon="ğŸ’–", layout="centered")

# ========== MBTIë³„ ìƒì„¸ ì—°ì•  ì„±í–¥ ==========
# ê° í•­ëª©ì€ ì—¬ëŸ¬ ë¬¸ë‹¨ìœ¼ë¡œ êµ¬ì„± (ë¬¸ì¥ ê¸¸ì´ì™€ ê°œí–‰ì„ ê³ ë ¤)
mbti_love_traits = {
    "INTJ": (
        "INTJëŠ” ì—°ì• ì—ì„œ â€˜ë¯¸ë˜ ì„¤ê³„â€™ì™€ â€˜ì‹ ë¢°â€™ê°€ í•µì‹¬ì´ì—ìš”.\n\n"
        "ê°ì •ì„ ê±°ì¹ ê²Œ ë“œëŸ¬ë‚´ê¸°ë³´ë‹¤ëŠ” ì²´ê³„ì ì´ê³  ë…¼ë¦¬ì ìœ¼ë¡œ ê´€ê³„ë¥¼ ìš´ì˜í•˜ë ¤ê³  í•©ë‹ˆë‹¤. "
        "ì¥ê¸°ì ì¸ ëª©í‘œë¥¼ ê³µìœ í•˜ê³  í•¨ê»˜ ì„±ì¥í•  ìˆ˜ ìˆëŠ” íŒŒíŠ¸ë„ˆì— í° ê°€ì¹˜ë¥¼ ë‘¡ë‹ˆë‹¤. "
        "ì´ˆë°˜ì—ëŠ” ì°¨ê°‘ê³  ê±°ë¦¬ë¥¼ ë‘ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ, ì‹ ë¢°ê°€ ìŒ“ì´ë©´ ê¹Šê³  í—Œì‹ ì ì¸ ëª¨ìŠµì„ ë³´ì—¬ì¤ë‹ˆë‹¤.\n\n"
        "ê°ˆë“±ì´ ìƒê¸°ë©´ ê°ì •ì  ëŒ€ì‘ë³´ë‹¤ í•´ê²°ì±…ì„ ì°¾ëŠ” ìª½ì„ ì„ í˜¸í•˜ë¯€ë¡œ, ê°ì •ì˜ ì„¸ì‹¬í•œ ì²˜ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤. "
        "ìƒëŒ€ì˜ ê°ì • í‘œí˜„ì„ ê¸°ë‹¤ë¦¬ëŠ” ì„±í–¥ì´ ìˆì–´ ë•Œë¡œëŠ” íŒŒíŠ¸ë„ˆê°€ ì†Œì™¸ê°ì„ ëŠë‚„ ìˆ˜ ìˆìœ¼ë‹ˆ ì˜ì‹ì ìœ¼ë¡œ ì• ì • í‘œí˜„ì„ ëŠ˜ë¦¬ëŠ” ê²ƒì´ ì¢‹ì•„ìš”."
    ),
    "INTP": (
        "INTPëŠ” í˜¸ê¸°ì‹¬ê³¼ ì§€ì  êµê°ì´ ì¤‘ì‹¬ì¸ ì—°ì• ë¥¼ ì„ í˜¸í•©ë‹ˆë‹¤.\n\n"
        "ê°ì •ì˜ í‘œí˜„ì´ ì¦‰ê°ì ì´ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë‚˜, ëŒ€í™”ì˜ ê¹Šì´ì™€ ììœ ë¡œìš´ ì‚¬ê³ ë¥¼ í•¨ê»˜ ë‚˜ëˆŒ ìˆ˜ ìˆëŠ” ì‚¬ëŒê³¼ ì˜ ë§ìŠµë‹ˆë‹¤. "
        "ê´€ê³„ì—ì„œì˜ ê·œì¹™ì´ë‚˜ ì „í†µì— ì–½ë§¤ì´ê¸°ë³´ë‹¤ëŠ” ë‘ ì‚¬ëŒì´ ì„œë¡œì˜ ì„¸ê³„ë¥¼ ì¡´ì¤‘í•˜ë©° ë…ë¦½ì„±ì„ ìœ ì§€í•˜ëŠ” ê±¸ ì¤‘ìš”ì‹œí•´ìš”.\n\n"
        "ê°ì • í‘œí˜„ì´ ì„œíˆ´ ìˆ˜ ìˆì–´ ì˜¤í•´ê°€ ìƒê¸°ê¸°ë„ í•˜ì§€ë§Œ, ì§„ì§€í•´ì§€ë©´ ìƒëŒ€ë¥¼ ìœ„í•´ ë¬¸ì œë¥¼ ë¶„ì„í•˜ê³  ê°œì„ í•˜ë ¤ëŠ” íƒœë„ë¥¼ ë³´ì…ë‹ˆë‹¤. "
        "ë”°ëœ»í•œ í”¼ë“œë°±ê³¼ ê¾¸ì¤€í•œ ê´€ì‹¬ì´ í° í˜ì´ ë©ë‹ˆë‹¤."
    ),
    "ENTJ": (
        "ENTJëŠ” ì—°ì• ì—ì„œë„ ëª©í‘œ ì§€í–¥ì ì´ê³  ì£¼ë„ì ì¸ ëª¨ìŠµì„ ë³´ì…ë‹ˆë‹¤.\n\n"
        "ê´€ê³„ì— ëª…í™•í•œ ë¹„ì „ì´ ìˆê³ , íŒŒíŠ¸ë„ˆì™€ í•¨ê»˜ ì„±ì¥í•˜ê³  ì„±ì·¨í•˜ëŠ” ê²ƒì„ ì¤‘ìš”í•˜ê²Œ ì—¬ê¹ë‹ˆë‹¤. "
        "ê²°ë‹¨ë ¥ ìˆê³  ì†”ì§í•´ ê°ˆë“± ì²˜ë¦¬ë„ ë¹ ë¥¸ í¸ì´ì§€ë§Œ, ë•Œë¡œëŠ” ì§€ë‚˜ì¹˜ê²Œ ì‹¤ìš©ì ìœ¼ë¡œ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n"
        "ê°ì • í‘œí˜„ì€ í–‰ë™ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ê²½ìš°ê°€ ë§ì•„ ë§ë¡œ ì• ì •ì„ í‘œí˜„í•˜ëŠ” ê²ƒì„ ì–´ìƒ‰í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. "
        "ìƒëŒ€ëŠ” ENTJì˜ ë¦¬ë”ì‹­ì„ ì‹ ë¢°í•˜ë˜, ê°ì •ì  ì§€ì§€ì™€ ì¸ì •(ì¹­ì°¬)ì„ ìì£¼ í•´ì£¼ë©´ ê´€ê³„ê°€ í›¨ì”¬ ì•ˆì •ë©ë‹ˆë‹¤."
    ),
    "ENTP": (
        "ENTPëŠ” ì—°ì• ì—ì„œ ìœ ë¨¸, ë³€í™”, ì•„ì´ë””ì–´ë¥¼ ê³µìœ í•˜ëŠ” ê²ƒì„ ì¦ê¹ë‹ˆë‹¤.\n\n"
        "ìƒˆë¡œìš´ ê²½í—˜ê³¼ í† ë¡ ì„ ì¦ê¸°ë©°, ìƒëŒ€ì™€ ì§€ì ìœ¼ë¡œ ìê·¹ì„ ì£¼ê³ ë°›ëŠ” ê´€ê³„ë¥¼ ì¢‹ì•„í•´ìš”. "
        "ì¦‰í¥ì ì´ê³  í™œê¸°ì°¬ ë©´ì´ ë§¤ë ¥ì ì´ì§€ë§Œ, ê°€ë” ì¼ê´€ì„± ë¶€ì¡±ìœ¼ë¡œ ìƒëŒ€ê°€ ë¶ˆì•ˆí•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n"
        "ê´€ê³„ì— ìˆì–´ì„œ ììœ ì™€ ì‹ ì„ í•¨ì„ ìœ ì§€í•˜ë ¤ë‹¤ ë³´ë‹ˆ ì¥ê¸°ì  ì•½ì†ê³¼ ë£¨í‹´ì„ ë§Œë“¤ ë•Œ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤. "
        "ìƒëŒ€ê°€ ì•ˆì •ê°ì„ ì›í•œë‹¤ë©´ ì†Œí†µìœ¼ë¡œ ê· í˜•ì„ ë§ì¶”ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤."
    ),
    "INFJ": (
        "INFJëŠ” ê¹Šì€ ê³µê°ê³¼ í—Œì‹ ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ì—°ì• ë¥¼ ì§€í–¥í•©ë‹ˆë‹¤.\n\n"
        "ìƒëŒ€ì˜ ë‚´ë©´ì„ ì½ì–´ì£¼ê³  ì„œí¬íŠ¸í•˜ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚˜ë©°, ì§„ì‹¬ìœ¼ë¡œ ì„œë¡œë¥¼ ì„±ì¥ì‹œí‚¤ëŠ” íŒŒíŠ¸ë„ˆê°€ ë˜ë ¤ í•©ë‹ˆë‹¤. "
        "ê²‰ìœ¼ë¡œëŠ” ì¡°ìš©í•˜ì§€ë§Œ ê°ì •ì  ì¹œë°€ê°ì„ ë§¤ìš° ì¤‘ì‹œí•´ í•œë²ˆ ì‹ ë¢°í•˜ë©´ í° í—Œì‹ ì„ ë³´ì…ë‹ˆë‹¤.\n\n"
        "ìƒëŒ€ê°€ ìƒì²˜ë°›ì§€ ì•Šë„ë¡ ì„¸ì‹¬íˆ ë°°ë ¤í•˜ëŠ” ëŒ€ì‹ , ìì‹ ë„ ë•Œë¡  ê°ì • í‘œì¶œì„ í†µí•´ ë„ì›€ì„ ìš”ì²­í•  ìˆ˜ ìˆë„ë¡ ì—°ìŠµí•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤."
    ),
    "INFP": (
        "INFPëŠ” ì´ìƒê³¼ ê°€ì¹˜ ì¤‘ì‹¬ì˜ ë¡œë§¨ìŠ¤ë¥¼ ì›í•©ë‹ˆë‹¤.\n\n"
        "ì‚¬ë‘ì„ ê¹Šì´ ëŠë¼ë©°, ì˜ë¯¸ ìˆëŠ” ì—°ê²°ê³¼ ê°ì •ì  ì§„ì‹¤ì„±ì„ ì¤‘ì‹œí•´ìš”. ë‚­ë§Œì ì´ê³  ì°½ì˜ì ì¸ í‘œí˜„ì„ í†µí•´ ì‚¬ë‘ì„ ì „í•©ë‹ˆë‹¤. "
        "ë‹¤ë§Œ ìƒì²˜ë¥¼ ë°›ìœ¼ë©´ ë‚´í–¥ì ìœ¼ë¡œ ë¬¼ëŸ¬ë‚  ìˆ˜ ìˆì–´ ìƒëŒ€ê°€ ì´ë¥¼ ì•Œì•„ì°¨ë¦¬ê³  ê¸°ë‹¤ë ¤ì£¼ëŠ” ì¸ë‚´ê°€ í•„ìš”í•©ë‹ˆë‹¤.\n\n"
        "ììœ ì™€ ì´í•´ë¥¼ ì œê³µí•´ì£¼ë©°, í•¨ê»˜ ê°€ì¹˜ê´€ì„ ê³µìœ í•  ìˆ˜ ìˆëŠ” ì‚¬ëŒì´ ê°€ì¥ ì˜ ë§ìŠµë‹ˆë‹¤. ì‘ì€ ê°ì •ì—ë„ ë¯¼ê°í•˜ë‹ˆ ë°˜ë³µì ì¸ í™•ì¸ê³¼ ì•ˆì •ê°ì´ í° ë„ì›€ì´ ë©ë‹ˆë‹¤."
    ),
    "ENFJ": (
        "ENFJëŠ” ê´€ê³„ì—ì„œì˜ ì¡°í™”ì™€ ë°°ë ¤ë¥¼ ìµœìš°ì„ ìœ¼ë¡œ í•©ë‹ˆë‹¤.\n\n"
        "ìƒëŒ€ì˜ ê°ì •ì— ë¯¼ê°í•˜ê³ , í•„ìš”í•  ë•Œ ì ê·¹ì ìœ¼ë¡œ ë³´ì‚´í”¼ëŠ” íƒ€ì…ì´ë¼ ì—°ì• ì—ì„œ ë“ ë“ í•œ íŒŒíŠ¸ë„ˆê°€ ë©ë‹ˆë‹¤. "
        "ì‚¬êµì ì´ì–´ì„œ ì—°ì¸ì˜ ì‚¬íšŒì  ê´€ê³„ê¹Œì§€ ì‹ ê²½ ì¨ì£¼ëŠ” ì„±í–¥ì´ ê°•í•©ë‹ˆë‹¤.\n\n"
        "ë‹¤ë§Œ ìƒëŒ€ë¥¼ ë°°ë ¤í•˜ëŠ” ê³¼ì •ì—ì„œ ìì‹ ì˜ ê°ì •ì´ë‚˜ ìš•êµ¬ë¥¼ ë¬µì‚´í•  ìˆ˜ ìˆìœ¼ë‹ˆ, ê°€ë”ì€ ì†”ì§í•˜ê²Œ 'ë‚˜'ì˜ í•„ìš”ë¥¼ í‘œí˜„í•˜ëŠ” ì—°ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤."
    ),
    "ENFP": (
        "ENFPëŠ” ì—´ì •ê³¼ ì¦‰í¥ì„±, ê°ì„±ì  í’ë¶€í•¨ìœ¼ë¡œ ì—°ì• ë¥¼ ì¦ê¹ë‹ˆë‹¤.\n\n"
        "ì‚¬ì†Œí•œ ê²ƒì—ì„œ ì„¤ë ˜ì„ ì°¾ê³ , í•¨ê»˜í•˜ëŠ” ê²½í—˜ì„ í†µí•´ ê´€ê³„ë¥¼ ê¹Šê²Œ ë§Œë“­ë‹ˆë‹¤. ììœ ì™€ ë‹¤ì–‘ì„±ì„ ì¡´ì¤‘í•˜ë©° ìƒëŒ€ì—ê²Œ ì˜ê°ì„ ì£¼ëŠ” í¸ì´ì—ìš”. "
        "ë°˜ë©´ ê°ì •ì˜ ê¸°ë³µì´ ìˆì„ ìˆ˜ ìˆì–´ ì¼ê´€ì„± ë¬¸ì œëŠ” ì‹ ê²½ ì¨ì¤˜ì•¼ í•©ë‹ˆë‹¤.\n\n"
        "ì¼ìƒì— í™œë ¥ì„ ì£¼ëŠ” íŒŒíŠ¸ë„ˆê°€ ë˜ì§€ë§Œ, ì•ˆì •ê°ì„ ì›í•˜ëŠ” ìƒëŒ€ì—ê²ŒëŠ” ê¾¸ì¤€í•œ ë°°ë ¤ì™€ ì•½ì† ì´í–‰ì´ ì¤‘ìš”í•©ë‹ˆë‹¤."
    ),
    "ISTJ": (
        "ISTJëŠ” ì•ˆì •ê°, ì±…ì„ê°, ì‹ ë¢°ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•œ ì—°ì• ë¥¼ ì¶”êµ¬í•©ë‹ˆë‹¤.\n\n"
        "ì•½ì†ì„ ì˜ ì§€í‚¤ê³  ì„±ì‹¤í•˜ê²Œ ê´€ê³„ë¥¼ ê´€ë¦¬í•˜ë ¤ëŠ” íƒœë„ê°€ ê°•í•©ë‹ˆë‹¤. ì‹¤ìš©ì ì´ê³  í˜„ì‹¤ì ì¸ í˜•íƒœì˜ ì‚¬ë‘ì„ ë³´ì—¬ì£¼ë©°, í° ë¡œë§¨í‹±í•œ ì´ë²¤íŠ¸ë³´ë‹¤ ì¼ìƒì˜ ì‹ ë¢°ê°€ ë” ì¤‘ìš”í•©ë‹ˆë‹¤. "
        "í‘œí˜„ì€ ì ˆì œëœ í¸ì´ì§€ë§Œ í–‰ë™ìœ¼ë¡œ ì• ì •ì„ ì¦ëª…í•©ë‹ˆë‹¤.\n\n"
        "ìƒëŒ€ê°€ ì‹ ë¢°í•  ìˆ˜ ìˆê³  ì˜ˆì¸¡ ê°€ëŠ¥í•œ íƒœë„ë¥¼ ë³´ì´ë©´ ê¹Šì€ ì•ˆì •ê°ì„ ëŠë‚ë‹ˆë‹¤. ê°ì •ì˜ í‘œí˜„ì„ ì¡°ê¸ˆ ë” í•´ì£¼ë©´ ê´€ê³„ê°€ ë¶€ë“œëŸ½ê²Œ íë¦…ë‹ˆë‹¤."
    ),
    "ISFJ": (
        "ISFJëŠ” í—Œì‹ ì ì´ê³  ì„¸ì‹¬í•œ ëŒë´„ìœ¼ë¡œ ì—°ì• ë¥¼ ì´ë•ë‹ˆë‹¤.\n\n"
        "ìƒëŒ€ì˜ í•„ìš”ë¥¼ ë¯¸ë¦¬ ì±™ê¸°ê³  ì‘ì€ ê²ƒê¹Œì§€ ê¸°ì–µí•˜ëŠ” ì„¬ì„¸í•¨ì´ ì¥ì ì…ë‹ˆë‹¤. ê°ˆë“±ì„ í”¼í•´ ì¡°ìš©íˆ ë§ì¶°ì£¼ë ¤ëŠ” ê²½í–¥ì´ ìˆì–´, ë•Œë¡œëŠ” ìê¸° ê°ì •ì„ ìˆ¨ê¸°ê¸°ë„ í•©ë‹ˆë‹¤. "
        "ì•ˆì •ê°ê³¼ ì¼ìƒì ì¸ ì¹œì ˆì„ ì¤‘ìš”í•˜ê²Œ ìƒê°í•©ë‹ˆë‹¤.\n\n"
        "ìƒëŒ€ê°€ ê³ ë§ˆì›€ì„ ìì£¼ í‘œí˜„í•´ì£¼ë©´ ISFJëŠ” ë” ë”°ëœ»í•˜ê²Œ ë°˜ì‘í•©ë‹ˆë‹¤. ìì‹ ì˜ ìš”êµ¬ë„ ê°€ë”ì€ ì§ì ‘ ë§í•˜ëŠ” ê²ƒì´ ê±´ê°•í•œ ê´€ê³„ì— ë„ì›€ì´ ë©ë‹ˆë‹¤."
    ),
    "ESTJ": (
        "ESTJëŠ” ëª…í™•í•œ êµ¬ì¡°ì™€ ì‹¤ì²œë ¥ì„ ê°€ì§„ ì—°ì•  ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤.\n\n"
        "ê´€ê³„ì—ì„œì˜ ì—­í• ê³¼ ì±…ì„ì„ ë¶„ëª…íˆ í•˜ë©° íš¨ìœ¨ì ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ëŠ” íƒœë„ê°€ ê°•í•©ë‹ˆë‹¤. ìƒëŒ€ì—ê²Œ ì‹ ë¢°ë°›ê³  ì¡´ê²½ë°›ëŠ” ê²ƒì„ ì¤‘ìš”ì‹œí•´ìš”. "
        "ê°ì •ë³´ë‹¤ ì‚¬ì‹¤ê³¼ ê²°ê³¼ë¥¼ ìš°ì„ í•˜ëŠ” ë“¯ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ, ì•ˆì •ì ì¸ ë³´í˜¸ì ì—­í• ì„ ì˜ í•´ëƒ…ë‹ˆë‹¤.\n\n"
        "ìƒëŒ€ê°€ ê°ì„±ì  ì§€ì§€ë¥¼ ì›í•  ë•ŒëŠ” ì˜ë„ì ìœ¼ë¡œ ë‹¤ì •í•¨ì„ ë³´ì—¬ì£¼ëŠ” ì—°ìŠµì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    ),
    "ESFJ": (
        "ESFJëŠ” ë”°ëœ»í•˜ê³  ì‚¬êµì ì¸ ëŒë´„í˜• ì—°ì¸ì´ì—ìš”.\n\n"
        "ìƒëŒ€ì˜ í–‰ë³µì„ ìì‹ ì˜ ê¸°ì¨ìœ¼ë¡œ ì‚¼ê³ , ê´€ê³„ ìœ ì§€ì— í•„ìš”í•œ ì‹¤ì§ˆì ì¸ ë°°ë ¤ë¥¼ ìì£¼ ë³´ì—¬ì¤ë‹ˆë‹¤. í’ë¶€í•œ ì‚¬íšŒì  ë„¤íŠ¸ì›Œí¬ë¡œ ì¸í•´ ì—°ì• ì—ì„œë„ í™œë°œí•œ í™œë™ì„ ì´ë•ë‹ˆë‹¤. "
        "ë•Œë¡œëŠ” íƒ€ì¸ì˜ ê¸°ëŒ€ì— ë§ì¶”ëŠë¼ ìì‹ ì˜ ê°ì •ì„ ì–µëˆ„ë¥¼ ìˆ˜ ìˆì–´ìš”.\n\n"
        "ìƒëŒ€ê°€ ì§„ì‹¬ìœ¼ë¡œ ê°ì‚¬ë¥¼ í‘œí˜„í•˜ë©´ ESFJëŠ” ë” í¬ê²Œ í—Œì‹ í•©ë‹ˆë‹¤. ì„œë¡œì˜ ê°ì •ê³¼ í•œê³„ë¥¼ ì¡´ì¤‘í•˜ëŠ” ëŒ€í™”ë¥¼ ê¾¸ì¤€íˆ í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤."
    ),
    "ISTP": (
        "ISTPëŠ” ììœ ë¡­ê³  ì‹¤ìš©ì ì¸ ì—°ì• ë¥¼ ì„ í˜¸í•©ë‹ˆë‹¤.\n\n"
        "ê°ì • í‘œí˜„ì€ ì ˆì œëœ í¸ì´ì§€ë§Œ, í–‰ë™ìœ¼ë¡œëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” íŒŒíŠ¸ë„ˆê°€ ë©ë‹ˆë‹¤. ì¦‰í¥ì ì¸ ë°ì´íŠ¸ë‚˜ í™œë™ì ì¸ ì·¨ë¯¸ë¥¼ ê³µìœ í•˜ë©´ ëˆë…í•´ì§€ëŠ” íƒ€ì…ì…ë‹ˆë‹¤. "
        "ê´€ê³„ì—ì„œ ê³¼ë„í•œ ê°ì •ì  ìš”êµ¬ë‚˜ ì§‘ì°©ì„ ë¶€ë‹´ìŠ¤ëŸ¬ì›Œí•  ìˆ˜ ìˆìœ¼ë‹ˆ, ì ë‹¹í•œ ê±°ë¦¬ ìœ ì§€ê°€ í•„ìš”í•©ë‹ˆë‹¤.\n\n"
        "ìƒëŒ€ì˜ ììœ¨ì„±ì„ ì¡´ì¤‘í•˜ê³  ìì‹ ë„ ê·¸ëŸ¬í•œ ììœ¨ì„±ì„ ê¸°ëŒ€í•©ë‹ˆë‹¤. ì•ˆì •ê³¼ ëª¨í—˜ì˜ ê· í˜•ì„ ë§ì¶”ë©´ ì¢‹ì€ ê´€ê³„ê°€ ë©ë‹ˆë‹¤."
    ),
    "ISFP": (
        "ISFPëŠ” ë¶€ë“œëŸ½ê³  ê°ì„±ì ì¸ ë¶„ìœ„ê¸°ë¡œ ì‚¬ë‘ì„ í‘œí˜„í•©ë‹ˆë‹¤.\n\n"
        "ì‘ì€ ì œìŠ¤ì²˜ì™€ ì„¬ì„¸í•œ ë°°ë ¤ë¥¼ í†µí•´ ì• ì •ì„ ì „í•˜ë©°, ì˜ˆìˆ ì ì´ê³  ê°ê°ì ì¸ ê²½í—˜ì„ í•¨ê»˜ ë‚˜ëˆ„ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. "
        "ìê¸° í‘œí˜„ì€ ë‚­ë§Œì ì´ë©´ì„œë„ ë‚´í–¥ì ì¼ ìˆ˜ ìˆì–´, ìƒëŒ€ê°€ ì´ ë¶€ë¶„ì„ ì´í•´í•´ì£¼ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.\n\n"
        "ê°ì •ì´ ì˜ˆë¯¼í•˜ë¯€ë¡œ ë¹„ë‚œë³´ë‹¤ëŠ” ë¶€ë“œëŸ¬ìš´ ì†Œí†µì´ íš¨ê³¼ì ì…ë‹ˆë‹¤. ì„œë¡œì˜ ê³µê°„ì„ ì¡´ì¤‘í•˜ë©´ì„œ ì¹œë°€ê°ì„ í‚¤ìš°ëŠ” ìŠ¤íƒ€ì¼ì´ì—ìš”."
    ),
    "ESTP": (
        "ESTPëŠ” í™œë°œí•˜ê³  í˜„ì‹¤ì ì¸ ë°©ì‹ìœ¼ë¡œ ì—°ì• ë¥¼ ì¦ê¹ë‹ˆë‹¤.\n\n"
        "ì•¡ì…˜ê³¼ ê²½í—˜ì„ í†µí•´ ì¹œë°€ê°ì„ ìŒ“ìœ¼ë©°, ì¦‰í¥ì ì´ê³  ëª¨í—˜ì ì¸ ë°ì´íŠ¸ë¥¼ ì„ í˜¸í•©ë‹ˆë‹¤. ì¬ì¹˜ì™€ ìœ ë¨¸ë¡œ ê´€ê³„ë¥¼ í™œê¸°ì°¨ê²Œ ë§Œë“œëŠ” ëŠ¥ë ¥ì´ ìˆì£ . "
        "ê°ì •ì ìœ¼ë¡œëŠ” ì§ì ‘ì ì´ê³  ì†”ì§í•˜ì§€ë§Œ, ê¹Šì€ ì•½ì†ì„ ìš”êµ¬í•  ë•ŒëŠ” ì£¼ì €í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n"
        "ìƒëŒ€ê°€ í•¨ê»˜ í™œë™ì„ ì¦ê¸°ê³  ìœ ì—°í•¨ì„ ë³´ì´ë©´ í˜¸í¡ì´ ì˜ ë§ìŠµë‹ˆë‹¤. ì¥ê¸°ì  ì•ˆì •ê°ì´ í•„ìš”í•˜ë‹¤ë©´ ê¾¸ì¤€í•œ ì‹ ë¢° ìŒ“ê¸°ê°€ í•„ìš”í•©ë‹ˆë‹¤."
    ),
    "ESFP": (
        "ESFPëŠ” ì¦ê±°ì›€ê³¼ ê°ê°ì  ê²½í—˜ì„ í†µí•´ ì‚¬ë‘ì„ í‘œí˜„í•©ë‹ˆë‹¤.\n\n"
        "ë°ê³  ì‚¬êµì ì´ë©° ë¶„ìœ„ê¸°ë¥¼ ì˜ ì‚´ë¦¬ëŠ” íƒ€ì…ìœ¼ë¡œ, ìƒëŒ€ì™€ í•¨ê»˜ ìˆëŠ” ìˆœê°„ì„ ìµœëŒ€í•œ ì¦ê¸°ë ¤ í•©ë‹ˆë‹¤. "
        "ê°ì • í‘œí˜„ì´ í’ë¶€í•˜ê³  ì¦‰ê°ì ì´ë¼ ìƒëŒ€ì—ê²Œ ë”°ëœ»í•¨ì„ ëŠë¼ê²Œ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë•Œë¡œëŠ” ê³„íšì„± ë¶€ì¡±ìœ¼ë¡œ ì‹¤ìš©ì  ë¬¸ì œì—ì„œ ì¶©ëŒì´ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”.\n\n"
        "ìƒëŒ€ê°€ í•¨ê»˜ ì›ƒê³  ì¦ê¸¸ ìˆ˜ ìˆëŠ” ìˆœê°„ì„ ìì£¼ ë§Œë“¤ì–´ì£¼ë©´ ESFPëŠ” ê´€ê³„ì— í¬ê²Œ í—Œì‹ í•©ë‹ˆë‹¤."
    ),
}

# ========== MBTI ê¶í•© ë°ì´í„° ==========
# ê° MBTIì— ëŒ€í•´ 'ì¶”ì²œ ìƒëŒ€ ëª©ë¡' (ìˆœì„œ: ê°€ì¥ ì˜ ë§ëŠ” ìˆœ). ê° í•­ëª©ì€ (íƒ€ì…, í•µì‹¬ì´ìœ )
mbti_compatibility = {
    "INTJ": [
        ("ENTP", "ì•„ì´ë””ì–´ ì¶©ëŒê³¼ êµê° â†’ ì§€ì  ìê·¹ì„ ì£¼ê³ ë°›ìŒ"),
        ("INFJ", "ê°€ì¹˜ê´€ê³¼ ì§„ì§€í•œ í—Œì‹ ì˜ ë°©ì‹ì´ ì˜ ë§ìŒ"),
        ("INTP", "ì„œë¡œì˜ ë…ë¦½ì„±ì„ ì¡´ì¤‘í•˜ë©° ê¹Šì€ ëŒ€í™”ë¥¼ ë‚˜ëˆ”"),
    ],
    "INTP": [
        ("ENTJ", "ë…¼ë¦¬ì  ë³´ì™„ â†’ ê³„íš ì‹¤í–‰ì„ ë„ì™€ì¤Œ"),
        ("ENFP", "í˜¸ê¸°ì‹¬ê³¼ ììœ ë¥¼ í•¨ê»˜ ì¦ê¹€"),
        ("INTJ", "ê³µìœ ëœ ì§€ì  ê´€ì‹¬ì‚¬ì™€ ë…ë¦½ì„±"),
    ],
    "ENTJ": [
        ("INTP", "ì•„ì´ë””ì–´ì™€ ì‹¤í–‰ì˜ í›Œë¥­í•œ ì¡°í•©"),
        ("ENFJ", "ì§€ì  ë¦¬ë”ì‹­ê³¼ ì •ì„œì  ê´€ë¦¬ì˜ ê· í˜•"),
        ("ENTP", "ë„ì „ê³¼ í¥ë¯¸ë¥¼ ì£¼ëŠ” ê´€ê³„"),
    ],
    "ENTP": [
        ("INFJ", "ìƒëŒ€ì˜ ì•ˆì •ê°ê³¼ ENTPì˜ í™œë ¥ì´ ê· í˜•ì„ ì´ë£¸"),
        ("INTJ", "ì„œë¡œ ìƒê°ì„ ìê·¹í•˜ëŠ” íŒŒíŠ¸ë„ˆ"),
        ("ENFP", "ê³µí†µëœ ëª¨í—˜ì‹¬ê³¼ ì¦‰í¥ì„±"),
    ],
    "INFJ": [
        ("ENFP", "ê°ì •ì  ê¹Šì´ì™€ í™œë ¥ì˜ ë³´ì™„"),
        ("INTJ", "ê°€ì¹˜ê´€ ë° ì¥ê¸° ë¹„ì „ì˜ ê³µê°"),
        ("INFP", "ê°ì„±ì  ê³µê°ê³¼ ì´ìƒ ì¶”êµ¬ì˜ ê³µìœ "),
    ],
    "INFP": [
        ("ENFJ", "ì™¸í–¥ì  ì§€ì§€ì™€ ë‚´ë©´ì  ì´ìƒì£¼ì˜ì˜ ê· í˜•"),
        ("INFJ", "ê¹Šì€ ê°ì •ì  ì—°ê²°ê³¼ ê°€ì¹˜ê³µìœ "),
        ("INTP", "ì§€ì  ììœ ì™€ ê°ì„±ì  ì´í•´"),
    ],
    "ENFJ": [
        ("INFP", "ê°ì„±ì  í’ë¶€í•¨ê³¼ í—Œì‹ ì˜ ì¡°í™”"),
        ("ENTJ", "ë¦¬ë”ì‹­ê³¼ ê´€ê³„ ìš´ì˜ì˜ ê· í˜•"),
        ("ENFP", "ì—´ì •ê³¼ ì‚¬íšŒì  ì—ë„ˆì§€ì˜ ê³µê°"),
    ],
    "ENFP": [
        ("INFJ", "ê°ì„±ì  ê¹Šì´ì™€ ì˜ê°ì˜ ìƒí˜¸ ë³´ì™„"),
        ("INTP", "ììœ ë¡œìš°ë©´ì„œë„ ì§€ì ì¸ ìê·¹"),
        ("ENFJ", "ì‚¬êµì  ì§€ì›ê³¼ ì—´ì •ì˜ ê²°í•©"),
    ],
    "ISTJ": [
        ("ESFJ", "ì‹¤ìš©ì  ë°°ë ¤ì™€ ì•ˆì •ê°ìœ¼ë¡œ ì˜ ë§ìŒ"),
        ("ISFJ", "ìƒí˜¸ ì±…ì„ê°ê³¼ í—Œì‹ "),
        ("ESTJ", "êµ¬ì¡°ì™€ ì˜ˆì¸¡ ê°€ëŠ¥ì„± ê³µìœ "),
    ],
    "ISFJ": [
        ("ISTJ", "ì•ˆì •ê°ê³¼ ì‹ ë¢°ì˜ ìƒí˜¸ ë³´ì™„"),
        ("ESFJ", "ë”°ëœ»í•¨ê³¼ ëŒë´„ì˜ ê³µë™ì²´"),
        ("INFP", "ì„œë¡œì˜ ì„¬ì„¸í•¨ì„ ì´í•´í•˜ëŠ” ì¡°í•©"),
    ],
    "ESTJ": [
        ("ISFJ", "íš¨ìœ¨ì„±ê³¼ í—Œì‹ ì˜ ì¡°í™”"),
        ("ISTJ", "ë¹„ìŠ·í•œ ê°€ì¹˜ì™€ ì±…ì„ê°"),
        ("ESFJ", "ì‚¬íšŒì  ì•ˆì •ê°ê³¼ ì‹¤ìš©ì„±"),
    ],
    "ESFJ": [
        ("ISFJ", "ì„œë¡œë¥¼ ì±™ê¸°ëŠ” ë°°ë ¤ì˜ ê´€ê³„"),
        ("ISTJ", "ì•ˆì •ê°ê³¼ ì‹¤ì²œë ¥ì˜ ê²°í•©"),
        ("ENFJ", "ì‚¬íšŒì  ì˜í–¥ë ¥ê³¼ ë”°ëœ»í•¨ì˜ ê²°í•©"),
    ],
    "ISTP": [
        ("ESFP", "ëª¨í—˜ê³¼ ê°ê°ì  ì¦ê±°ì›€ì˜ ì¡°í™”"),
        ("ISFP", "ì¡°ìš©í•œ ê°ì„± ê³µìœ "),
        ("ESTP", "í™œë™ì ì´ê³  í˜„ì‹¤ì ì¸ íŒŒíŠ¸ë„ˆ"),
    ],
    "ISFP": [
        ("ISTP", "ì„œë¡œì˜ ììœ ì™€ ê°ì„±ì„ ì¡´ì¤‘"),
        ("ESFP", "ìƒëŒ€ì˜ ì—ë„ˆì§€ë¡œ ê°ì •ì´ ì‚´ì•„ë‚¨"),
        ("INFP", "ê°ì„±ì  ê³µê° ë° ì´ìƒì  ê³µìœ "),
    ],
    "ESTP": [
        ("ISFP", "í™œë™ì  ê²½í—˜ê³¼ ê°ì„±ì  ì•ˆì • ë³´ì™„"),
        ("ISTP", "ì‹¤ìš©ì  ì¬ë¯¸ì™€ ì¦‰í¥ì„±"),
        ("ESFP", "ëª¨í—˜ì  ìœ ì‚¬ì„±"),
    ],
    "ESFP": [
        ("ISTP", "ì‹¤ì œì  í™œë™ê³¼ ì¦ê±°ì›€ì˜ ì¡°í™”"),
        ("ISFP", "ê°ì„±ì  ì—°ê²°ê³¼ ì¦ê±°ì›€"),
        ("ESTP", "ì¦‰í¥ì  ì¦ê±°ì›€ì„ í•¨ê»˜ í•¨"),
    ],
}

# ê¸°ë³¸ MBTI ëª©ë¡ ì •ë ¬
MBTI_LIST = list(mbti_love_traits.keys())
MBTI_LIST.sort()

# ========== í—¬í¼ í•¨ìˆ˜ ==========
def summarize_text(text: str, width: int = 80) -> str:
    """ê¸´ í…ìŠ¤íŠ¸ë¥¼ width ê¸°ì¤€ìœ¼ë¡œ ì¤„ë°”ê¿ˆ ì²˜ë¦¬í•´ ê¹”ë”í•˜ê²Œ ë³´ì—¬ì£¼ê¸°"""
    paragraphs = text.split("\n\n")
    wrapped = "\n\n".join(fill(p, width=width) for p in paragraphs)
    return wrapped

def compatibility_score(primary: str, other: str) -> int:
    """
    ê°„ë‹¨í•œ ê¶í•© ì ìˆ˜ ë§¤ê¸°ê¸° (ì •ì„±ì )
    - ë§¤ì¹­ ë¦¬ìŠ¤íŠ¸ì— ìˆìœ¼ë©´ ë†’ì€ ì ìˆ˜, ì•„ë‹ˆë©´ ì¤‘ê°„/ë‚®ìŒ
    ì´ í•¨ìˆ˜ëŠ” UIìš© ì ìˆ˜ ì‹œë®¬ë ˆì´ì…˜ì…ë‹ˆë‹¤.
    """
    top_list = [t for t, _ in mbti_compatibility.get(primary, [])]
    if other == primary:
        return 70  # ê°™ì€ ìœ í˜•: ì´í•´ëŠ” ì‰½ì§€ë§Œ ë‹¨ì ë„ ê³µìœ 
    if other in top_list:
        # score based on position
        idx = top_list.index(other)
        return 90 - idx * 8  # 90, 82, 74 ...
    # ê¸°ë³¸: 55 ~ 70
    return 60

def generate_pair_analysis(me: str, partner: str) -> str:
    """ë‚˜ì™€ ìƒëŒ€ MBTIì— ë”°ë¥¸ ìŒë°© ì„¤ëª…ê³¼ í–‰ë™ íŒì„ ë°˜í™˜"""
    my_trait = mbti_love_traits.get(me, "")
    partner_trait = mbti_love_traits.get(partner, "")
    score = compatibility_score(me, partner)
    # ê°„ë‹¨í•œ ìƒí˜¸ì‘ìš© ì¡°ì–¸ (ì •ì„±ì )
    advice_lines = []
    # If partner is listed in my top compatibilities
    top_for_me = [t for t, _ in mbti_compatibility.get(me, [])]
    top_for_partner = [t for t, _ in mbti_compatibility.get(partner, [])]
    if partner in top_for_me and me in top_for_partner:
        relation = "ìƒí˜¸ë³´ì™„ì  ê´€ê³„ â€” ì„œë¡œì˜ ê°•ì ì„ ì˜ ì±„ì›Œì¤„ ìˆ˜ ìˆì–´ìš”."
    elif partner in top_for_me:
        relation = "ë‚´ê²ŒëŠ” ì˜ ë§ëŠ” íƒ€ì… â€” ë‹¹ì‹ ì˜ ìŠ¤íƒ€ì¼ì´ íŒŒíŠ¸ë„ˆì—ê²ŒëŠ” ë„ì „ì´ ë  ìˆ˜ ìˆì–´ìš”."
    elif me in top_for_partner:
        relation = "íŒŒíŠ¸ë„ˆì—ê²ŒëŠ” ì˜ ë§ëŠ” íƒ€ì… â€” ìƒëŒ€ì˜ ê¸°ëŒ€ë¥¼ ì´í•´í•˜ë ¤ëŠ” ë…¸ë ¥ì´ í•„ìš”í•´ìš”."
    else:
        relation = "ì„œë¡œ ë‹¤ë¥¸ ì ì´ ë¶„ëª…í•˜ì§€ë§Œ, ë…¸ë ¥ê³¼ ì´í•´ë¡œ ì•ˆì •ì ì¸ ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”."
    advice_lines.append(relation)

    # êµ¬ì²´ì  íŒ (ì˜ˆì‹œ íŒ¨í„´)
    tips = []
    tips.append(f"- {me} ì…ì¥ì—ì„œ: {mbti_love_traits.get(me).split('.')[0]}...")
    tips.append(f"- {partner} ì…ì¥ì—ì„œ: {mbti_love_traits.get(partner).split('.')[0]}...")
    # ë§ì¶¤í˜• í–‰ë™ íŒ (ê°„ë‹¨ ê·œì¹™)
    if score >= 85:
        tips.append("ì„œë¡œì˜ ì°¨ì´ë¥¼ ì¥ì ìœ¼ë¡œ í™œìš©í•˜ì„¸ìš”. ì •ê¸°ì ì¸ ê¹Šì€ ëŒ€í™”ê°€ ê´€ê³„ë¥¼ ë” ë‹¨ë‹¨í•˜ê²Œ í•©ë‹ˆë‹¤.")
    elif score >= 70:
        tips.append("ì˜ì‚¬ì†Œí†µ ê·œì¹™(ì˜ˆ: ê°ì • ì²´í¬ì¸, ê¸°ëŒ€ì¹˜ ëª…í™•í™”)ì„ ë§Œë“¤ì–´ ê°ˆë“±ì„ ì¤„ì´ì„¸ìš”.")
    else:
        tips.append("ì„œë¡œ ë‹¤ë¥¸ ìš”êµ¬ì™€ í‘œí˜„ ë°©ì‹ì„ ì¸ì •í•˜ê³ , ì‘ì€ ì•½ì†ë¶€í„° ì‹ ë¢°ë¥¼ ìŒ“ì•„ê°€ì„¸ìš”.")

    # ì¡°í•©í•´ì„œ ë°˜í™˜
    analysis = (
        f"=== ìš”ì•½ ì ìˆ˜: {score}/100 ===\n\n"
        f"{relation}\n\n"
        f"---\n\n"
        f"ë‹¹ì‹ ({me})ì˜ ì—°ì•  ì„±í–¥ ìš”ì•½:\n{summarize_text(my_trait, width=80)}\n\n"
        f"ìƒëŒ€({partner})ì˜ ì—°ì•  ì„±í–¥ ìš”ì•½:\n{summarize_text(partner_trait, width=80)}\n\n"
        "ì¶”ì²œ íŒ:\n" + "\n".join(tips)
    )
    return analysis

# ========== Streamlit UI ==========
st.title("ğŸ’– MBTI ì—°ì•  ì„±í–¥ & ê¶í•© ë¶„ì„ê¸°")
st.write("ë‹¹ì‹ ì˜ MBTIë¥¼ ì„ íƒí•˜ë©´ ìì„¸í•œ ì—°ì•  ì„±í–¥ì„ ë³´ì—¬ì£¼ê³ , ìƒëŒ€ MBTIì™€ì˜ ê¶í•©ì„ ë¶„ì„í•´ì¤˜ìš”.")
st.write("---")

# ë ˆì´ì•„ì›ƒ: ì™¼ìª½ì— ë‚´ MBTI ì„ íƒ, ì˜¤ë¥¸ìª½ì— ìƒëŒ€ MBTI ì„ íƒ
col1, col2 = st.columns([1, 1])
with col1:
    my_mbti = st.selectbox("ë‚´ MBTI ì„ íƒ", MBTI_LIST, index=MBTI_LIST.index("INFP") if "INFP" in MBTI_LIST else 0)
with col2:
    partner_mbti = st.selectbox("ìƒëŒ€ MBTI ì„ íƒ (ê¶í•© í™•ì¸ìš©)", ["â€” ì„ íƒ ì•ˆí•¨ â€”"] + MBTI_LIST, index=0)

st.markdown("---")

# ìƒì„¸ ì—°ì• ì„±í–¥ í‘œì‹œ
st.subheader(f"ğŸ” {my_mbti}ì˜ ìì„¸í•œ ì—°ì•  ì„±í–¥")
st.markdown(summarize_text(mbti_love_traits[my_mbti], width=80).replace("\n", "  \n"))

# í™•ì¥ ì„¹ì…˜: ì„±í–¥ ì„¸ë¶€ (ì¥ì  / ì£¼ì˜ì  / ë°ì´íŠ¸ íŒ)
with st.expander("ë” ë³´ê¸° â€” ì¥ì  Â· ì£¼ì˜ì  Â· ë°ì´íŠ¸ íŒ"):
    st.write("**ì¥ì **")
    # ì¥ì /ì£¼ì˜ì /ë°ì´íŠ¸íŒì„ ìë™ ì¶”ì¶œí•˜ëŠ” ê°„ë‹¨í•œ heuristic (ì—¬ê¸°ì„  ìš”ì•½ ë¬¸ì¥ ì‚¬ìš©)
    trait_text = mbti_love_traits[my_mbti]
    # ê°„ë‹¨í•œ bullet ìƒì„± (ë¬¸ì¥ ì²« ë¬¸ì¥ ë“±)
    sentences = [s.strip() for s in trait_text.split(". ") if s]
    for i, s in enumerate(sentences[:5]):
        st.write(f"- {s.strip()}.")
    st.write("**ì£¼ì˜í•  ì **")
    st.write("- ê°ì • í‘œí˜„ì˜ ë°©ì‹ì´ ìƒëŒ€ì™€ ì¶©ëŒí•  ìˆ˜ ìˆìŒ. ì„œë¡œì˜ ìŠ¤íƒ€ì¼ì„ ì¡´ì¤‘í•˜ì„¸ìš”.")
    st.write("**ë°ì´íŠ¸ ì•„ì´ë””ì–´**")
    default_date_ideas = {
        "INTJ": "ì¡°ìš©í•œ ì¹´í˜ì—ì„œ ì¥ê¸° ê³„íš ì´ì•¼ê¸°í•˜ê¸° / ì „ì‹œíšŒ ë°©ë¬¸",
        "ENFP": "ì¦‰í¥ ë“œë¼ì´ë¸Œ / ì‘ê³  ìƒ‰ë‹¤ë¥¸ ì²´í—˜ í´ë˜ìŠ¤",
        "ISFP": "ì‘ì€ ë¯¸ìˆ ê´€Â·ì†Œí’ / ì†ìˆ˜ ë§Œë“  ì„ ë¬¼ ì£¼ê¸°",
    }
    st.write(f"- ì˜ˆì‹œ: {default_date_ideas.get(my_mbti, 'í•¨ê»˜ í•˜ëŠ” í™œë™ìœ¼ë¡œ ì¹œë°€ê° ìŒ“ê¸°(ì·¨ë¯¸ ê³µìœ , ì§§ì€ ì—¬í–‰ ë“±)')}")

st.markdown("---")

# ê¶í•© ë¶„ì„ (ìƒëŒ€ MBTI ì„ íƒ ì‹œ)
if partner_mbti != "â€” ì„ íƒ ì•ˆí•¨ â€”":
    st.subheader("ğŸ’‘ ìŒë°© ê¶í•© ë¶„ì„")
    pair_analysis = generate_pair_analysis(my_mbti, partner_mbti)
    # ë³´ê¸° ì¢‹ê²Œ ì½”ë“œ ë¸”ë¡ ìŠ¤íƒ€ì¼ë¡œ ë³´ì—¬ì£¼ê¸°
    st.code(pair_analysis, line_numbers=False)
    st.markdown("---")
    # ìƒí˜¸ ì¶”ì²œ ì‚¬ìœ 
    st.subheader("ğŸ” ê¶í•© ì„¸ë¶€: ì¶”ì²œ/ì£¼ì˜ ì‚¬ìœ ")
    # show compatibility list for my_mbti
    my_top = mbti_compatibility.get(my_mbti, [])
    st.write(f"**{my_mbti}ì—ê²Œ íŠ¹íˆ ì˜ ë§ëŠ” íƒ€ì…ë“¤(ìƒìœ„ 3)**")
    for t, reason in my_top:
        st.write(f"- **{t}** â€” {reason}")
    # show reciprocal
    partner_top = mbti_compatibility.get(partner_mbti, [])
    st.write(f"\n**{partner_mbti}ì—ê²Œ íŠ¹íˆ ì˜ ë§ëŠ” íƒ€ì…ë“¤(ìƒìœ„ 3)**")
    for t, reason in partner_top:
        st.write(f"- **{t}** â€” {reason}")

    # ë‹¤ìš´ë¡œë“œ: ê²°ê³¼ ìš”ì•½ í…ìŠ¤íŠ¸
    summary_text = (
        f"MBTI ì—°ì•  ì„±í–¥ & ê¶í•© ë¶„ì„\n"
        f"ë‚ ì§œ: {datetime.date.today().isoformat()}\n\n"
        f"ë‚˜: {my_mbti}\n"
        f"ìƒëŒ€: {partner_mbti}\n\n"
        f"{pair_analysis}\n\n"
        "â€» ì´ ë¶„ì„ì€ ì¼ë°˜ì  ì„±í–¥ê³¼ ì‹¬ë¦¬ì  ê²½í–¥ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ì•ˆë‚´ì…ë‹ˆë‹¤. ì‹¤ì œ ê´€ê³„ì—ì„œëŠ” ê°œë³„ì  ì°¨ì´ê°€ í½ë‹ˆë‹¤."
    )
    st.download_button("ê²°ê³¼ ìš”ì•½ ë‹¤ìš´ë¡œë“œ (.txt)", data=summary_text, file_name=f"mbti_couple_{my_mbti}_{partner_mbti}.txt")
else:
    # ì „ì²´ ê¶í•© ì¶”ì²œ (ë‚´ MBTI ê¸°ì¤€ top 5)
    st.subheader("ğŸ’¡ ì „ì²´ ê¶í•© ì¶”ì²œ (ë‹¹ì‹  ê¸°ì¤€)")
    with st.expander("ë‚´ MBTIì™€ ì˜ ë§ëŠ” ì¶”ì²œ íƒ€ì… ë³´ê¸°"):
        top_list = mbti_compatibility.get(my_mbti, [])
        if top_list:
            st.write("**ì¶”ì²œ í†±(ê°„ë‹¨ ì´ìœ )**")
            for idx, (t, reason) in enumerate(top_list, start=1):
                st.write(f"{idx}. **{t}** â€” {reason}")
        else:
            st.write("ì¶”ì²œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.")

    # ë²„íŠ¼: ì „ì²´ MBTIì™€ì˜ ëª¨ì˜ ì ìˆ˜ ê³„ì‚°
    if st.button("ì „ì²´ MBTIì™€ ëª¨ì˜ ê¶í•© ì ìˆ˜ ë³´ê¸°"):
        st.write("ë‚´ MBTIì™€ ë‹¤ë¥¸ ìœ í˜•ë“¤ì˜ ê°„ë‹¨ ì ìˆ˜(ì •ì„±ì  ì‹œë®¬ë ˆì´ì…˜)")
        scores = []
        for t in MBTI_LIST:
            sc = compatibility_score(my_mbti, t)
            scores.append((t, sc))
        # ì •ë ¬: ì ìˆ˜ ë‚´ë¦¼ì°¨ìˆœ
        scores.sort(key=lambda x: x[1], reverse=True)
        # í‘œë¡œ ì¶œë ¥ (ìƒìœ„ 10ê°œ)
        st.write("ìƒìœ„ 10 ê²°ê³¼ (ìµœê³ ë¶€í„°)")
        for t, sc in scores[:10]:
            # ì„¤ëª… í•œ ì¤„: ì´ìœ ê°€ ëª©ë¡ì— ìˆìœ¼ë©´ ë°›ì•„ì˜¤ê¸°
            reasons = {k: v for k, v in mbti_compatibility.get(my_mbti, [])}
            reason_text = reasons.get(t, "ì„œë¡œ ë‹¤ë¥¸ ì ì„ ì´í•´í•˜ê³  ë§ì¶°ê°€ë©´ ì¢‹ì€ ê´€ê³„ê°€ ë  ìˆ˜ ìˆì–´ìš”.")
            st.write(f"- **{t}**: ì ìˆ˜ {sc}/100 â€” {reason_text}")

st.markdown("---")
st.caption("â€» ì´ ì•±ì€ MBTIì˜ ì¼ë°˜ì  íŠ¹ì„±ì„ ì°¸ê³ í•´ ë§Œë“  ê°€ì´ë“œì…ë‹ˆë‹¤. ê°œì¸ì°¨ê°€ í¬ë‹ˆ ì°¸ê³ ìš©ìœ¼ë¡œ í™œìš©í•˜ì„¸ìš”. Made with â¤ï¸")

