import streamlit as st
import datetime

# 별자리 계산 함수
def get_zodiac(month, day):
    zodiac_dates = [
        ((1, 20), (2, 18), "물병자리"),
        ((2, 19), (3, 20), "물고기자리"),
        ((3, 21), (4, 19), "양자리"),
        ((4, 20), (5, 20), "황소자리"),
        ((5, 21), (6, 21), "쌍둥이자리"),
        ((6, 22), (7, 22), "게자리"),
        ((7, 23), (8, 22), "사자자리"),
        ((8, 23), (9, 22), "처녀자리"),
        ((9, 23), (10, 22), "천칭자리"),
        ((10, 23), (11, 22), "전갈자리"),
        ((11, 23), (12, 21), "사수자리"),
        ((12, 22), (1, 19), "염소자리"),
    ]

    for start, end, zodiac in zodiac_dates:
        if (month == start[0] and day >= start[1]) or (month == end[0] and day <= end[1]):
            return zodiac
    return "알 수 없음"

# 별자리별 연애 성향 (성별 포함)
love_traits = {
    "양자리": {
        "남성": "열정적이고 직설적이며, 연애에서 리드하려는 경향이 강하다. 사랑을 빠르게 표현하고 적극적이다.",
        "여성": "자신감 넘치고 솔직하며, 상대에게 매력을 발산한다. 강한 독립심으로 연애에서도 주도권을 가지려 한다."
    },
    "황소자리": {
        "남성": "안정적이고 책임감이 강하며, 현실적인 사랑을 중시한다. 믿음을 주는 연애 스타일이다.",
        "여성": "헌신적이고 감각적이며, 안정된 관계를 원한다. 느긋하지만 변함없는 사랑을 준다."
    },
    "쌍둥이자리": {
        "남성": "지적 호기심이 강해 대화로 상대를 끌어당긴다. 변덕스럽지만 매력이 넘친다.",
        "여성": "밝고 사교적이며, 상대방과 다양한 경험을 공유하고 싶어 한다. 자극적인 연애를 즐긴다."
    },
    "게자리": {
        "남성": "가족적이고 따뜻하며, 보호 본능이 강하다. 다소 소심하지만 진심 어린 사랑을 한다.",
        "여성": "다정하고 배려심이 많으며, 상대방을 돌보려는 성향이 강하다. 안정된 사랑을 원한다."
    },
    "사자자리": {
        "남성": "자존심이 강하고 화려한 연애를 즐긴다. 상대방에게 특별한 대우를 하며 사랑을 크게 표현한다.",
        "여성": "당당하고 카리스마 있으며, 연애에서 주목받고 싶어 한다. 뜨겁고 열정적인 사랑을 한다."
    },
    "처녀자리": {
        "남성": "섬세하고 꼼꼼하며, 헌신적인 연애를 한다. 상대를 세심하게 배려한다.",
        "여성": "현실적이고 신중하며, 믿음을 주는 연애를 한다. 안정적인 관계를 중시한다."
    },
    "천칭자리": {
        "남성": "매너 있고 사교적이며, 조화를 중요시한다. 상대에게 로맨틱한 사랑을 전한다.",
        "여성": "우아하고 매력적이며, 사랑에서 균형을 찾는다. 외모와 분위기를 중시한다."
    },
    "전갈자리": {
        "남성": "강렬하고 깊은 사랑을 한다. 질투심이 강하지만 헌신적이다.",
        "여성": "매혹적이고 집착이 강하지만, 상대방에게 몰입하는 뜨거운 사랑을 한다."
    },
    "사수자리": {
        "남성": "자유로운 영혼으로 즐겁고 긍정적인 연애를 한다. 집착하지 않는다.",
        "여성": "활발하고 낙천적이며, 연애에서 모험심이 강하다. 자유를 중시한다."
    },
    "염소자리": {
        "남성": "성실하고 현실적이며, 책임감 있는 사랑을 한다. 다소 보수적이다.",
        "여성": "신뢰할 수 있고 인내심이 강하며, 장기적인 관계를 중시한다."
    },
    "물병자리": {
        "남성": "독창적이고 자유로운 연애를 한다. 친구 같은 사랑을 선호한다.",
        "여성": "개방적이고 독립적이며, 자유로운 관계를 원한다. 독특한 매력을 지녔다."
    },
    "물고기자리": {
        "남성": "감수성이 풍부하고 로맨틱하다. 다정하며 상대의 감정을 잘 이해한다.",
        "여성": "상상력이 풍부하고 헌신적이며, 상대방에게 깊이 빠져드는 사랑을 한다."
    }
}

# 별자리 궁합 추천 (간단히 정리)
compatibility = {
    "양자리": ["사자자리", "사수자리"],
    "황소자리": ["처녀자리", "염소자리"],
    "쌍둥이자리": ["천칭자리", "물병자리"],
    "게자리": ["전갈자리", "물고기자리"],
    "사자자리": ["양자리", "사수자리"],
    "처녀자리": ["황소자리", "염소자리"],
    "천칭자리": ["쌍둥이자리", "물병자리"],
    "전갈자리": ["게자리", "물고기자리"],
    "사수자리": ["양자리", "사자자리"],
    "염소자리": ["황소자리", "처녀자리"],
    "물병자리": ["쌍둥이자리", "천칭자리"],
    "물고기자리": ["게자리", "전갈자리"]
}

# Streamlit 앱 시작
st.title("✨ 별자리와 성별로 보는 연애 궁합 앱 ✨")

st.header("1. 본인 정보 입력")
your_birthday = st.date_input("생년월일을 입력하세요", datetime.date(2000, 1, 1))
your_gender = st.radio("성별", ["남성", "여성"])

your_zodiac = get_zodiac(your_birthday.month, your_birthday.day)
st.subheader(f"당신의 별자리: {your_zodiac}")
st.write(f"연애 성향 ({your_gender}): {love_traits[your_zodiac][your_gender]}")

st.header("2. 상대방 정보 입력")
partner_birthday = st.date_input("상대방 생년월일을 입력하세요", datetime.date(2000, 1, 1), key="partner")
partner_gender = st.radio("상대방 성별", ["남성", "여성"], key="partner_gender")

partner_zodiac = get_zodiac(partner_birthday.month, partner_birthday.day)
st.subheader(f"상대방의 별자리: {partner_zodiac}")
st.write(f"연애 성향 ({partner_gender}): {love_traits[partner_zodiac][partner_gender]}")

st.header("3. 두 사람의 궁합")
if partner_zodiac in compatibility[your_zodiac]:
    st.success(f"🌟 {your_zodiac}와 {partner_zodiac}는 환상적인 궁합입니다! 서로의 장점을 잘 살리고 긍정적인 관계로 발전할 가능성이 큽니다.")
else:
    st.warning(f"⚡ {your_zodiac}와 {partner_zodiac}는 성향 차이가 클 수 있습니다. 서로의 차이를 이해하고 배려한다면 충분히 좋은 관계를 만들 수 있습니다.")

st.header("4. 추천 별자리")
recommended = compatibility[your_zodiac]
st.write(f"{your_zodiac}와 잘 어울리는 별자리: {', '.join(recommended)}")

